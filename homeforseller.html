<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Black Themed Auction</title>
  <style>
    body {
      background-color: #000;
      color: #fff;
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
    }
    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background-color: #111;
      padding: 20px;
    }
    header h1 {
      margin: 0;
    }
    button, input, select {
      background-color: #222;
      color: #fff;
      border: 1px solid #444;
      padding: 8px;
      margin: 5px;
    }
    .container {
      padding: 20px;
    }
    .item {
      background-color: #111;
      padding: 20px;
      margin-bottom: 15px;
      border: 1px solid #333;
    }
    .hidden {
      display: none;
    }
    .modal {
      display: none;
      position: fixed;
      z-index: 10;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.8);
      justify-content: center;
      align-items: center;
    }
    .modal-content {
      background: #222;
      padding: 20px;
      width: 80%;
      max-width: 500px;
    }
    .close {
      float: right;
      cursor: pointer;
      color: #fff;
      font-size: 20px;
    }
  </style>
</head>
<body>
  <header>
    <h1>Auction</h1>
    <button onclick="showAddForm()">+ Add New Item</button>
  </header>

  <div class="container" id="items-container"></div>

  <!-- Add/Edit Item Modal -->
  <div class="modal" id="itemModal">
    <div class="modal-content">
      <span class="close" onclick="closeModal('itemModal')">&times;</span>
      <h3 id="modalTitle">Add New Item</h3>
      <input id="itemName" placeholder="Item Name" /><br/>
      <input id="itemBid" placeholder="Starting Bid" /><br/>
      <input id="itemCategory" placeholder="Category" /><br/>
      <input id="itemLocation" placeholder="Location" /><br/>
      <input id="itemLastDate" type="date" placeholder="Last Date" /><br/>
      <input id="itemImage" type="text" placeholder="Image URL (optional)" /><br/>
      <button onclick="saveItem()">Save</button>
    </div>
  </div>

  <!-- Sell Modal -->
  <div class="modal" id="sellModal">
    <div class="modal-content">
      <span class="close" onclick="closeModal('sellModal')">&times;</span>
      <h3>Select a bidder to sell:</h3>
      <form id="sellForm"></form>
    </div>
  </div>

  <script>
    let items = [
      {
        name: "Designer Chair", bid: "$750", category: "FURNITURE",
        location: "New York", lastDate: "2025-04-15", image: "", file: "designer-chair.html",
        bids: [{ name: "Alice", amount: "$750" }, { name: "Bob", amount: "$700" }]
      },
      {
        name: "Gaming Console", bid: "$380", category: "ELECTRONICS",
        location: "LA", lastDate: "2025-04-20", image: "", file: "gaming-console.html",
        bids: [{ name: "Tom", amount: "$380" }]
      }
    ];

    let editingIndex = -1;

    function renderItems() {
      const container = document.getElementById("items-container");
      container.innerHTML = "";
      items.forEach((item, index) => {
        const div = document.createElement("div");
        div.className = "item";
        div.innerHTML = `
          <h3>${item.name}</h3>
          <p>Bid: ${item.bid} | Category: ${item.category}</p>
          <p>Location: ${item.location} | Last Date: ${item.lastDate}</p>
          ${item.image ? `<img src="${item.image}" width="100" />` : ""}
          <br/>
          <button onclick="viewMore('${item.file}')">View More</button>
          <button onclick="editItem(${index})">Edit</button>
          <button onclick="deleteItem(${index})">Delete</button>
          <button onclick="sellItem(${index})">Sell</button>
        `;
        container.appendChild(div);
      });
    }

    function viewMore(file) {
      window.location.href = file;
    }

    function showAddForm() {
      editingIndex = -1;
      document.getElementById("modalTitle").innerText = "Add New Item";
      document.getElementById("itemName").value = "";
      document.getElementById("itemBid").value = "";
      document.getElementById("itemCategory").value = "";
      document.getElementById("itemLocation").value = "";
      document.getElementById("itemLastDate").value = "";
      document.getElementById("itemImage").value = "";
      document.getElementById("itemModal").style.display = "flex";
    }

    function closeModal(id) {
      document.getElementById(id).style.display = "none";
    }

    function saveItem() {
      const name = document.getElementById("itemName").value;
      const bid = document.getElementById("itemBid").value;
      const category = document.getElementById("itemCategory").value;
      const location = document.getElementById("itemLocation").value;
      const lastDate = document.getElementById("itemLastDate").value;
      const image = document.getElementById("itemImage").value;

      const newItem = {
        name, bid, category, location, lastDate, image,
        file: "#", bids: []
      };

      if (editingIndex === -1) {
        items.push(newItem);
      } else {
        items[editingIndex] = { ...items[editingIndex], ...newItem };
      }
      closeModal("itemModal");
      renderItems();
    }

    function editItem(index) {
      editingIndex = index;
      const item = items[index];
      document.getElementById("modalTitle").innerText = "Edit Item";
      document.getElementById("itemName").value = item.name;
      document.getElementById("itemBid").value = item.bid;
      document.getElementById("itemCategory").value = item.category;
      document.getElementById("itemLocation").value = item.location;
      document.getElementById("itemLastDate").value = item.lastDate;
      document.getElementById("itemImage").value = item.image;
      document.getElementById("itemModal").style.display = "flex";
    }

    function deleteItem(index) {
      if (confirm("Are you sure to delete this item?")) {
        items.splice(index, 1);
        renderItems();
      }
    }

    function sellItem(index) {
      const form = document.getElementById("sellForm");
      form.innerHTML = "";
      const bids = items[index].bids || [];

      if (bids.length === 0) {
        form.innerHTML = "<p>No bids available.</p>";
      } else {
        bids.forEach((bid, i) => {
          form.innerHTML += `
            <input type="radio" name="bidder" id="bidder${i}" value="${bid.name}">
            <label for="bidder${i}">${bid.name} - ${bid.amount}</label><br/>
          `;
        });
        form.innerHTML += `<br/><button type="button" onclick="confirmSale(${index})">Sell to this user</button>`;
      }
      document.getElementById("sellModal").style.display = "flex";
    }

    function confirmSale(index) {
      const selected = document.querySelector('input[name="bidder"]:checked');
      if (!selected) return alert("Select a bidder!");
      alert(`Item "${items[index].name}" sold to ${selected.value}!`);
      closeModal("sellModal");
    }

    window.onload = renderItems;
  </script>
</body>
</html>
